<template>
  <!-- ÏµúÏô∏Í≥Ω div ÌïÑÏöî -->
  <div>


    <!-- ÌÖåÎßà ÏÉÅÎã®Î∞î ÏñëÏãù -->
    <div
      class="hero page-inner overlay"
      style="background-image: url('images/hero_bg_3.jpg')"
    >
      <div class="container">
        <div class="row justify-content-center align-items-center">
          <div class="col-lg-9 text-center mt-5">
            <h1 class="heading" data-aos="fade-up">Add QnA</h1>

            <nav
              aria-label="breadcrumb"
              data-aos="fade-up"
              data-aos-delay="200"
            >
              <ol class="breadcrumb text-center justify-content-center">
                <li class="breadcrumb-item">
                  <router-link to="/qna">QnA</router-link>
                </li>
                <li
                  class="breadcrumb-item active text-white-50"
                  aria-current="page"
                >
                  Add QnA
                </li>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </div>
    <!-- ÏÉÅÎã®Î∞îÏñëÏãù ÎÅù -->


    <!-- ÏôºÏ™Ω ÏÑπÏÖò -->
    <div class="section">
      <div class="container">
        <div class="row">
          <div
            class="col-lg-4 mb-5 mb-lg-0"
            data-aos="fade-up"
            data-aos-delay="100"
          >
            <div class="contact-info">
              <div class="address mt-2">
                <i class="icon-room"></i>
                <h4 class="mb-2">Location:</h4>
                <p>
                  43 Raymouth Rd. Baltemoer,<br />
                  London 3910
                </p>
              </div>

              <div class="open-hours mt-4">
                <i class="icon-clock-o"></i>
                <h4 class="mb-2">Open Hours:</h4>
                <p>
                  Sunday-Friday:<br />
                  11:00 AM - 2300 PM
                </p>
              </div>

              <div class="email mt-4">
                <i class="icon-envelope"></i>
                <h4 class="mb-2">Email:</h4>
                <p>info@Untree.co</p>
              </div>

              <div class="phone mt-4">
                <i class="icon-phone"></i>
                <h4 class="mb-2">Call:</h4>
                <p>+1 1234 55488 55</p>
              </div>
            </div>
          </div>
          
          <!-- Ìèº ÏñëÏãù -->

          <!-- Í∏∞Ï°¥ Ìèº ÌÖåÎßàÏñëÏãù ÏïàÏóê ÎÑ£Í∏∞-->
          <div class="col-lg-8" data-aos="fade-up" data-aos-delay="200">
            <form action="#">
              <!-- <div class="row"> -->
                
              <!-- Í∏∞Ï°¥qnaÎç∞Ïù¥ÌÑ∞ ÏãúÏûë -->
              <!-- ÏñëÏãùÌèº ÏãúÏûë -->
                <!-- v-if ÏãúÏûë -->
                <div v-if="!submitted" class="row">

                  <div class="col-6 mb-3">
                    <input
                      type="text"
                      class="form-control"
                      required
                      v-model="qna.subject"
                      placeholder="Your Subject"
                    />
                  </div>
                  <div class="col-6 mb-3">
                    <input
                      type="text"
                      class="form-control"
                      required
                      v-model="qna.name"
                      placeholder="Your Name"
                    />
                  </div>
                  <div class="col-12 mb-3">
                    <textarea
                      name=""
                      id=""
                      cols="30"
                      rows="7"
                      v-model="qna.message"
                      class="form-control"
                      placeholder="Í∂ÅÍ∏àÌïòÏã† ÏÇ¨Ìï≠ÏùÑ Î¨∏ÏùòÌïòÏÑ∏Ïöî"
                    ></textarea>
                  </div>
                  <div class="col-12 mb-3">
                    <input
                      type="email"
                      class="form-control"
                      v-model="qna.email"
                      placeholder="Your Email"
                    />
                  </div>
                  <!-- Ï†úÏ∂úÎ≤ÑÌäº -->
                  <div class="col-12">
                    <input
                      @click="saveQna"
                      type="submit"
                      value="Submit"
                      class="btn btn-primary"
                    />
                  </div>
                </div>
                <!-- v-if ÎÅù -->

                <!-- v-else -->
                <div v-else>
                  <div class="alert alert-success" role="alert">
                    Save qna successfully!
                  </div>
                  <!-- Ï∂îÍ∞Ä Îì±Î°ù Î≤ÑÌäº -->
                  <!-- <button @click="newQna" class="btn btn-primary">Add New Qna</button> -->
                  <!-- QnA Ï≤´ÌôîÎ©¥ ÎèåÏïÑÍ∞ÄÍ∏∞ -->
                  <router-link to="/qna" class="btn btn-primary"
                    >Go back to QnA</router-link
                  >
                </div>
                <!-- v-else ÎÅù -->
                
              <!-- </div> -->
            </form>
            <!-- ÏñëÏãùÌèº ÎÅù -->
          </div>
          <!-- Í∏∞Ï°¥qnaÎç∞Ïù¥ÌÑ∞ ÎÅù -->

        </div>
      </div>
    </div>
    <!-- /.untree_co-section -->
    



  </div>
</template>

<script>
// üëÄaxios Í≥µÌÜµÌï®Ïàò(springboot Ïó∞ÎèôÏùÑ ÏúÑÌïú Ìï®ÏàòÎì§Ïùò Î™®ÏûÑ) import ÌïÑÏàò!!
import QnaDataService from "../service/QnaDataService";
// ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ import --> ÏûëÏÑ±Ìïú Ïª¥Ìè¨ÎÑåÌä∏ÎßàÎã§ Í∞ÅÍ∞Å ÏûÑÌè¨Ìä∏ ÌïÑÏöî(Í≥µÌÜµ Ïª¥Ìè¨ ÎπºÍ≥†)
import navbarCom from "../assets/js/navbar";
import counterCom from "../assets/js/counter";
import customCom from "../assets/js/custom";

/* eslint-disable */
export default {
  data() {
    return {
      qna: {
        subject: "", //string ÏùÄ Ï¥àÍ∏∞Í∞íÏÑ∏ÌåÖ "" (int Îäî null)
        name: "",
        message: "",
        email: "",
      },
      // submit Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ true(Î∞±Ïóî, insert)Í∞Ä ÎêòÍ≥†, You submitted successfully! ÌôîÎ©¥Ïóê Ï∂úÎ†•Îê®
      submitted: false,
    };
  },
  methods: {
    saveQna() {
      // ÏûÑÏãú Í∞ùÏ≤¥ Î≥ÄÏàò -> springboot Ï†ÑÏÜ°
      // Î≤àÌò∏Îäî(cid) ÏûêÎèôÏÉùÏÑ±ÎêòÎØÄÎ°ú ÎπºÍ≥† Ï†ÑÏÜ°Ìï®
      let data = {
        subject: this.qna.subject,
        name: this.qna.name,
        message: this.qna.message,
        email: this.qna.email,
      };

      // insert ÏöîÏ≤≠ Ìï®Ïàò Ìò∏Ï∂ú(axios Í≥µÌÜµÌï®Ïàò Ìò∏Ï∂ú)
      QnaDataService.create(data)
        // ÏÑ±Í≥µÌïòÎ©¥ then() Í≤∞Í≥ºÍ∞Ä Ï†ÑÏÜ°Îê®
        .then((response) => {
          this.qna.cid = response.data.cid;
          // ÏΩòÏÜî Î°úÍ∑∏ Ï∂úÎ†•(response.data)
          console.log(response.data);
          // Î≥ÄÏàò submitted
          this.submitted = true;
        })
        // Ïã§Ìå®ÌïòÎ©¥ .catch() Í≤∞Í≥ºÍ∞Ä Ï†ÑÏÜ°Îê®
        .catch((e) => {
          console.log(e);
        });
    },
    newQna() {
      // ÏÉàÏñëÏãù Îã§Ïãú Î≥¥Ïó¨Ï£ºÍ∏∞ Ìï®Ïàò, Î≥ÄÏàò Ï¥àÍ∏∞Ìôî (Í≥†Í∞ùÎì±Î°ù ÌõÑ Ï∂îÍ∞ÄÎ°ú Îòê Í≥†Í∞ù Îì±Î°ùÌï† Îïå)
      this.submitted = false;
      this.qna = {};
    },
  },
  mounted() {
    navbarCom();
    counterCom();
    customCom();
  },
};
</script>

<style>
.submit-form {
  max-width: 300px;
  margin: auto;
}
.margin {
  margin-bottom: 20px;
}
</style>
