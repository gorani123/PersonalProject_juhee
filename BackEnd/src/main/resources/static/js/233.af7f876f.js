"use strict";(self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[]).push([[233],{7233:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var l=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"col-md-8"},[t("div",{staticClass:"input-group mb-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTitle,expression:"searchTitle"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search by Title"},domProps:{value:e.searchTitle},on:{input:function(t){t.target.composing||(e.searchTitle=t.target.value)}}}),t("div",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){e.page=1,e.retrieveGallery()}}},[e._v(" Search ")])])])]),t("div",{staticClass:"row justify-content-md-center"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"mb-3"},[e._v(" Items per Page: "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.pageSize,expression:"pageSize"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pageSize=t.target.multiple?a:a[0]},function(t){return e.handlePageSizeChange(t)}]}},e._l(e.pageSizes,(function(a){return t("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(a)+" ")])})),0)]),t("b-pagination",{attrs:{"total-rows":e.count,"per-page":e.pageSize,"prev-text":"Prev","next-text":"Next"},on:{change:e.handlePageChange},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),t("div",{staticClass:"mb-3 col-md-5"},[t("label",{staticClass:"form-label",attrs:{for:"galleryTitle"}},[e._v("Gallry Title")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.galleryTitle,expression:"galleryTitle"}],staticClass:"form-control",attrs:{type:"text",id:"galleryTitle",required:"",name:"galleryTitle"},domProps:{value:e.galleryTitle},on:{input:function(t){t.target.composing||(e.galleryTitle=t.target.value)}}})]),t("div",{staticClass:"mb-3 col-md-5"},[t("label",{staticClass:"form-label",attrs:{for:"galleryFileName"}},[e._v("Gallery Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.galleryFileName,expression:"galleryFileName"}],staticClass:"form-control",attrs:{type:"text",id:"galleryFileName",required:"",name:"galleryFileName"},domProps:{value:e.galleryFileName},on:{input:function(t){t.target.composing||(e.galleryFileName=t.target.value)}}})]),t("div",{staticClass:"mb-3 col-md-5"},[t("label",{staticClass:"btn btn-default p-0"},[t("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:e.selectGallery}})])]),t("div",{staticClass:"mb-3"},[t("button",{staticClass:"btn btn-success btn-sm float-left",attrs:{disabled:!e.currentGallery},on:{click:e.upload}},[e._v(" Upload ")])])])]),e.previewGallery?t("div",[t("div",[t("img",{staticClass:"preview my-3",attrs:{src:e.previewGallery,alt:""}})])]):e._e(),e.message?t("div",{staticClass:"alert alert-secondary",attrs:{role:"alert"}},[e._v(" "+e._s(e.message)+" ")]):e._e(),t("div",{staticClass:"row"},e._l(e.gallery,(function(a,l){return t("div",{key:l,staticClass:"col-sm-4"},[t("div",{staticClass:"card"},[t("img",{staticClass:"card-img-top",attrs:{src:a.galleryUrl,alt:"강의"}}),t("div",{staticClass:"card-body"},[t("h5",{staticClass:"card-title"},[e._v(e._s(a.galleryTitle))]),t("p",{staticClass:"card-text"},[e._v(" "+e._s(a.galleryFileName)+" ")]),t("a",{staticStyle:{color:"inherit"},on:{click:function(t){return e.deleteImage(a.gid)}}},[t("span",{staticClass:"badge bg-danger"},[e._v("Delete")])])])])])})),0)])},s=[],r=a(6645);class i{upload(e,t,a){let l=new FormData;return l.append("galleryTitle",e),l.append("galleryFileName",t),l.append("gallery",a),r.Z.post("/gallery/upload",l,{headers:{"Content-Type":"multipart/form-data"}})}getGallerys(e,t,a){return console.log(e),console.log(t),console.log(a),r.Z.get(`/gallery?galleryTitle=${e}&page=${t}&size=${a}`)}delete(e){return r.Z["delete"](`/gallery/deletion/${e}`)}}var n=new i,o={data(){return{currentGallery:void 0,previewGallery:void 0,message:"",gallery:[],searchTitle:"",galleryTitle:"",galleryFileName:"",page:1,count:0,pageSize:3,pageSizes:[3,6,9]}},methods:{retrieveGallery(){n.getGallerys(this.searchTitle,this.page-1,this.pageSize).then((e=>{const{gallery:t,totalItems:a}=e.data;this.gallery=t,this.count=a,console.log(e.data)})).catch((e=>{console.log(e)}))},selectGallery(){this.currentGallery=this.$refs.file.files.item(0),this.previewGallery=URL.createObjectURL(this.currentGallery),this.message=""},upload(){n.upload(this.galleryTitle,this.galleryFileName,this.currentGallery).then((e=>(this.message=e.data.message,n.getGallerys(this.searchTitle,this.page-1,this.pageSize)))).then((e=>{const{gallery:t,totalItems:a}=e.data;this.gallery=t,this.count=a,console.log(e.data)})).catch((e=>{console.log(e),this.message="Could not upload the image!"+e,this.currentGallery=void 0}))},handlePageSizeChange(e){this.pageSize=e.target.value,this.page=1,this.retrieveGallery()},handlePageChange(e){this.page=e,this.retrieveGallery()},deleteImage(e){n["delete"](e).then((e=>{console.log(e),this.message="정상적으로 삭제되었습니다.",this.retrieveGallery()})).catch((e=>{console.log(e),this.message="오류가 발생했습니다."+e.message}))}},mounted(){this.retrieveGallery()}},c=o,g=a(1001),d=(0,g.Z)(c,l,s,!1,null,null,null),p=d.exports}}]);
//# sourceMappingURL=233.af7f876f.js.map