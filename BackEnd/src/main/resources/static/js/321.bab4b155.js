"use strict";(self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[]).push([[321],{7321:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"col-md-8"},[t("div",{staticClass:"input-group mb-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTitle,expression:"searchTitle"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search by Title"},domProps:{value:e.searchTitle},on:{input:function(t){t.target.composing||(e.searchTitle=t.target.value)}}}),t("div",{staticClass:"input-group-append"},[t("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){e.page=1,e.retrieveFileDb()}}},[e._v(" Search ")])])])]),t("div",{staticClass:"row justify-content-md-center"},[t("div",{staticClass:"col-12"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"mb-3"},[e._v(" Items per Page: "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.pageSize,expression:"pageSize"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pageSize=t.target.multiple?a:a[0]},function(t){return e.handlePageSizeChange(t)}]}},e._l(e.pageSizes,(function(a){return t("option",{key:a,domProps:{value:a}},[e._v(" "+e._s(a)+" ")])})),0)]),t("b-pagination",{attrs:{"total-rows":e.count,"per-page":e.pageSize,"prev-text":"Prev","next-text":"Next"},on:{change:e.handlePageChange},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),t("div",{staticClass:"mb-3 col-md-5"},[t("label",{staticClass:"form-label",attrs:{for:"fileTitle"}},[e._v("이미지명")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fileTitle,expression:"fileTitle"}],staticClass:"form-control",attrs:{type:"text",id:"fileTitle",required:"",name:"fileTitle"},domProps:{value:e.fileTitle},on:{input:function(t){t.target.composing||(e.fileTitle=t.target.value)}}})]),t("div",{staticClass:"mb-3 col-md-5"},[t("label",{staticClass:"form-label",attrs:{for:"fileContent"}},[e._v("내용")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.fileContent,expression:"fileContent"}],staticClass:"form-control",attrs:{type:"text",id:"fileContent",required:"",name:"fileContent"},domProps:{value:e.fileContent},on:{input:function(t){t.target.composing||(e.fileContent=t.target.value)}}})]),t("div",{staticClass:"mb-3 col-md-5"},[t("label",{staticClass:"btn btn-default p-0"},[t("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:e.selectImage}})])]),t("div",{staticClass:"mb-3"},[t("button",{staticClass:"btn btn-success btn-sm float-left",attrs:{disabled:!e.currentImage},on:{click:e.upload}},[e._v(" Upload ")])])])]),e.previewImage?t("div",[t("div",[t("img",{staticClass:"preview my-3",attrs:{src:e.previewImage,alt:""}})])]):e._e(),e.message?t("div",{staticClass:"alert alert-secondary",attrs:{role:"alert"}},[e._v(" "+e._s(e.message)+" ")]):e._e(),t("div",{staticClass:"row"},e._l(e.fileDb,(function(a,i){return t("div",{key:i,staticClass:"col-sm-4"},[t("div",{staticClass:"card"},[t("img",{staticClass:"card-img-top",attrs:{src:a.fileUrl,alt:"강의"}}),t("div",{staticClass:"card-body"},[t("h5",{staticClass:"card-title"},[e._v(e._s(a.fileTitle))]),t("p",{staticClass:"card-text"},[e._v(" "+e._s(a.fileContent)+" ")]),t("a",{staticStyle:{color:"inherit"},on:{click:function(t){return e.deleteImage(a.fid)}}},[t("span",{staticClass:"badge bg-danger"},[e._v("Delete")])])])])])})),0)])},s=[],l=a(6645);class n{upload(e,t,a){let i=new FormData;return i.append("fileTitle",e),i.append("fileContent",t),i.append("fileDb",a),l.Z.post("/fileDb/upload",i,{headers:{"Content-Type":"multipart/form-data"}})}getFiles(e,t,a){return console.log(e),console.log(t),console.log(a),l.Z.get(`/fileDb?fileTitle=${e}&page=${t}&size=${a}`)}delete(e){return l.Z["delete"](`/fileDb/deletion/${e}`)}}var o=new n,r={data(){return{currentImage:void 0,previewImage:void 0,message:"",fileDb:[],searchTitle:"",fileTitle:"",fileContent:"",page:1,count:0,pageSize:3,pageSizes:[3,6,9]}},methods:{retrieveFileDb(){o.getFiles(this.searchTitle,this.page-1,this.pageSize).then((e=>{const{fileDb:t,totalItems:a}=e.data;this.fileDb=t,this.count=a,console.log(e.data)})).catch((e=>{console.log(e)}))},selectImage(){this.currentImage=this.$refs.file.files.item(0),this.previewImage=URL.createObjectURL(this.currentImage),this.message=""},upload(){o.upload(this.fileTitle,this.fileContent,this.currentImage).then((e=>(this.message=e.data.message,o.getFiles(this.searchTitle,this.page-1,this.pageSize)))).then((e=>{const{fileDb:t,totalItems:a}=e.data;this.fileDb=t,this.count=a,console.log(e.data)})).catch((e=>{console.log(e),this.message="Could not upload the image!"+e,this.currentImage=void 0}))},handlePageSizeChange(e){this.pageSize=e.target.value,this.page=1,this.retrieveFileDb()},handlePageChange(e){this.page=e,this.retrieveFileDb()},deleteImage(e){o["delete"](e).then((e=>{console.log(e),this.message="정상적으로 삭제되었습니다.",this.retrieveFileDb()})).catch((e=>{console.log(e),this.message="오류가 발생했습니다."+e.message}))}},mounted(){this.retrieveFileDb()}},c=r,d=a(1001),g=(0,d.Z)(c,i,s,!1,null,null,null),p=g.exports}}]);
//# sourceMappingURL=321.bab4b155.js.map